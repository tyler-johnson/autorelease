sudo: false
language: node_js
notifications:
  email: false
addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - g++-4.8
      - libgnome-keyring-dev
env:
  - CXX=g++-4.8
cache:
  - node_modules
node_js:
  - '5'
  - '6'
  - '7'
install:
  - npm install
before_script:
  - git config --global user.email "autorelease@travis-ci.org"
  - git config --global user.name "Autorelease CI"
  - npm run lint
script:
  - npm test
after_success:
  - if [[ "$TRAVIS_PULL_REQUEST" == "true" ]]; then npm run autorelease -- -n; fi
  - if [[ "$TRAVIS_PULL_REQUEST" != "true" ]]; then npm run autorelease; fi
branches:
  only:
    - "master"
